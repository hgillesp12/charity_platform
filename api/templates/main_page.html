<!DOCTYPE html>
<html>
  <head>
    <!-- Bootstrap CSS CDN -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='styles.css') }}"
    />
  </head>
  <body>
    <!-- Navbar -->
    <div class="navbar">
      <div class="navbar-links">
        <a href="/about">About the idea</a>
      </div>
    </div>

    <!-- Main Content -->
    <div class="container main-content">
      <form
        action="/filter_map/{{ name }}/{{ reg_number }}"
        method="post">
        <!-- Filter section -->
        <div class="form-row">
          <!-- Day Dropdown -->
          <div class="form-group col-md-4">
              <label for="day">Day</label>
              <select class="form-control" id="day" name="day">
                  <option value="" disabled selected>All Days</option>
                  <option value="Monday">Monday</option>
                  <option value="Tuesday">Tuesday</option>
                  <option value="Wednesday">Wednesday</option>
                  <option value="Thursday">Thursday</option>
                  <option value="Friday">Friday</option>
                  <option value="Saturday">Saturday</option>
                  <option value="Sunday">Sunday</option>
              </select>
          </div>

          <!-- Time Dropdown -->
          <div class="form-group col-md-4">
              <label for="time">Time</label>
              <select class="form-control" id="time" name="time">
                  <option value="" disabled selected>All Times</option>
                  <option value="Morning">Morning</option>
                  <option value="Afternoon">Afternoon</option>
                  <option value="Evening">Evening</option>
              </select>
          </div>

          <!-- Location Dropdown -->
          <div class="form-group col-md-4">
              <label for="location">Location</label>
              <select class="form-control" id="location" name="location">
                  <option value="" disabled selected>All Locations</option>
                  <option value="Barking and Dagenham">Barking and Dagenham</option>
                  <option value="Barnet">Barnet</option>
                  <!-- Add other locations as needed -->
              </select>
          </div>
      </div>

      <!-- Submit Button -->
      <div class="row justify-content-center">
          <div class="col-md-4">
              <input class="btn custom-button btn-primary1 btn-register-page" type="submit" name="submit"
                  value="Submit" />
          </div>
      </div>
      <hr />
    </form>

      <!-- Map Section -->
      <div class="row margin-row">
        <div class="col">
          <div class="card custom-card">
            <div class="card-body text-center">{{ map_html_string|safe }}</div>
          </div>
        </div>
      </div>

      <!-- Bulletin Board Section -->
      <div class="row margin-row">
        <div class="col-md-6 col-lg-6">
          <h1>Bulletin board</h1>
        </div>
        <div class="col-md-6 col-lg-6 text-right">
          <a
            class="btn custom-button btn-primary1 btn-register-page"
            href="/post_message/{{ name }}/{{ reg_number }}"
          >
            Post message
          </a>
          <a
            class="btn custom-button btn-primary1 btn-register-page"
            href="/questionnaire/{{ name }}/{{ reg_number }}"
          >
            Add new schedule
          </a>
        </div>
      </div>

      <!-- Messages Section -->
      <div class="messages">
        {% if all_messages %} {% for i in range(all_messages.sender_name|length)
        %}
        <div class="row margin-row justify-content-center">
          <div class="card custom-card message-card">
            <div>
              <div class="row">
                <div class="col">
                  <strong>From:</strong> {{ all_messages['sender_name'][i] }}
                </div>
                <div class="col">
                  <strong>Message:</strong> {{ all_messages['content'][i] }}
                </div>
                <div class="col">
                  <strong>Time:</strong> {{ all_messages['date_time'][i] }}
                </div>
              </div>
            </div>
          </div>
        </div>
        {% endfor %} {% else %}
        <div class="col">
          <div class="card custom-card">
            <div class="card-body text-center">
              <p>No messages to display.</p>
            </div>
          </div>
        </div>
        {% endif %}
      </div>
    </div>

    <!-- Bootstrap JS, Popper.js, and jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  </body>
</html>
